/* ==================================================
  ** _typography.scss

================================================== */

// ==================================================
// TYPE SPECS
// ==================================================

$t-base-spec: (
  weight: $sage-body-font-weight,
  size: $sage-body-font-size,
  leading: $sage-body-font-line-height,
  kerning: $sage-body-letter-spacing
);

$t-body-small-spec: map-merge($t-base-spec, (
  size: sage-font-size(sm)
));

$t-body-xsmall-spec: map-merge($t-base-spec, (
  size: sage-font-size(xs)
));

// The following map is used to generate both `.t-` classeses for each
// entry as well as `%t-` of the same for limited use with `@extend`

$type-specs: (
  // Headings
  "heading-1": (
    weight: sage-font-weight(bold),
    size: sage-font-size(4xl),
    leading: sage-line-height(sm),
    kerning: sage-letter-spacing(sm),
  ),
  "heading-2": (
    weight: sage-font-weight(bold),
    size: sage-font-size(3xl),
    leading: sage-line-height(sm),
    kerning: sage-letter-spacing(sm),
  ),
  "heading-3": (
    weight: sage-font-weight(bold),
    size: sage-font-size(2xl),
    leading: sage-line-height(sm),
    kerning: sage-letter-spacing(sm),
  ),
  "heading-4": (
    weight: sage-font-weight(semibold),
    size: sage-font-size(xl),
    leading: sage-line-height(sm),
    kerning: sage-letter-spacing(sm)
  ),
  "heading-5": (
    weight: sage-font-weight(semibold),
    size: sage-font-size(lg),
    leading: sage-line-height(sm),
    kerning: sage-letter-spacing(sm)
  ),
  "heading-6": (
    weight: sage-font-weight(semibold),
    size: $sage-body-font-size,
    leading: sage-line-height(sm),
    kerning: sage-letter-spacing(sm)
  ),

  // Body
  "body": $t-base-spec,
  "body-med": map-merge($t-base-spec, (
    weight: sage-font-weight(medium)
  )),
  "body-semi": map-merge($t-base-spec, (
    weight: sage-font-weight(semibold)
  )),
  "body-bold": map-merge($t-base-spec, (
    weight: sage-font-weight(bold)
  )),

  // Body Small
  "body-small": $t-body-small-spec,
  "body-small-med": map-merge($t-body-small-spec, (
    weight: sage-font-weight(medium)
  )),
  "body-small-semi": map-merge($t-body-small-spec, (
    weight: sage-font-weight(semibold)
  )),
  "body-small-bold": map-merge($t-body-small-spec, (
    weight: sage-font-weight(bold)
  )),

  // Body XSmall
  "body-xsmall": $t-body-xsmall-spec,
  "body-xsmall-med": map-merge($t-body-xsmall-spec, (
    weight: sage-font-weight(medium)
  )),
  "body-xsmall-semi": map-merge($t-body-xsmall-spec, (
    weight: sage-font-weight(semibold)
  )),
  "body-xsmall-bold": map-merge($t-body-xsmall-spec, (
    weight: sage-font-weight(bold)
  )),

  // Additional custom specs
);

// Automate setting up base specs to extend in context.
@each $spec-name, $spec in $type-specs {
  %t-sage-#{$spec-name} {
    font-weight: map-get($spec, weight);
    font-size: map-get($spec, size);
    letter-spacing: map-get($spec, kerning);
    line-height: map-get($spec, leading);
  }

  .t-sage-#{$spec-name} {
    @extend %t-sage-#{$spec-name};
  }
}


// ==================================================
// MIXINS
// ==================================================

@mixin t-block-spacing($block-spacing) {
  margin-bottom: $block-spacing;

  &.no-margin-bottom {
    margin-bottom: 0;
  }
}


// ==================================================
// STYLES
// ==================================================

body {
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-size-adjust: 100%;
  color: $sage-body-font-color;
  font-family: $sage-body-font-stack;

  @supports (font-variation-settings: normal) {
    font-family: "Inter var", $sage-body-font-stack;
  }
}

// For simpler markup styling in blocks of CMS-like text, use this container
.sage-type {

  // Body-like elements get spacing below
  p:not([class]),
  ul:not([class]),
  ol:not([class]),
  dl:not([class]),
  [class*="t-sage-body"] {
    @include t-block-spacing($sage-body-margin-bottom);
  }

  // Heading-like elements get spacing below as well
  h1:not([class]),
  h2:not([class]),
  h3:not([class]),
  h4:not([class]),
  h5:not([class]),
  h6:not([class]),
  [class*="t-sage-heading-"] {
    color: $sage-heading-font-color;

    @include t-block-spacing($sage-heading-margin-bottom);
  }

  // Elements with no classes extend related type specs
  h1:not([class]) {
    @extend %t-sage-heading-1;
  }

  h2:not([class]) {
    @extend %t-sage-heading-2;
  }

  h3:not([class]) {
    @extend %t-sage-heading-3;
  }

  h4:not([class]) {
    @extend %t-sage-heading-4;
  }

  h5:not([class]) {
    @extend %t-sage-heading-5;
  }

  h6:not([class]) {
    @extend %t-sage-heading-6;
  }

  li:not([class]),
  p:not([class]) {
    @extend %t-sage-body;
  }

  // Hyperlinks get some default coloring applied
  a:not([class]) {
    color: sage-color(primary);
  }
}

a {
  &:hover,
  &:focus {
    color: inherit;
    text-decoration: none;
  }
}

hr {
  margin: sage-spacing() 0;
  border: 0;
  border-top: sage-border();
}
